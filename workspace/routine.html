<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ê³¼ ê´€ë¦¬</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .routine-container { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }
        .time-slots { background: var(--bg-dark); padding: 20px; border-radius: 15px; height: fit-content; }
        .time-block { display: grid; grid-template-columns: 80px 1fr; gap: 10px; margin-bottom: 10px; }
        .time-label { background: var(--bg-hover); padding: 10px; border-radius: 8px; 
                     text-align: center; font-weight: bold; }
        .activity-slot { background: var(--bg-hover); padding: 15px; border-radius: 8px; 
                        min-height: 50px; cursor: pointer; display: flex; align-items: center; 
                        justify-content: space-between; }
        .activity-slot.active { background: var(--primary); color: white; }
        .activity-slot.current { border: 2px solid var(--secondary); }
        .templates { background: var(--bg-dark); padding: 20px; border-radius: 15px; }
        .template-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
                        gap: 10px; margin-top: 15px; }
        .template-item { background: var(--bg-hover); padding: 15px; border-radius: 10px; 
                        text-align: center; cursor: pointer; transition: all 0.3s; }
        .template-item:hover { background: var(--primary); color: white; transform: translateY(-3px); }
        .template-icon { font-size: 2em; margin-bottom: 5px; }
        .preset-buttons { display: flex; gap: 10px; margin-bottom: 20px; }
        .preset-btn { flex: 1; padding: 10px; background: var(--bg-dark); border: 2px solid var(--border); 
                     border-radius: 10px; cursor: pointer; }
        .preset-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }
        @media (max-width: 768px) { .routine-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <a href="index.html" class="back-btn">â† ë’¤ë¡œ</a>
            <h1>ì¼ê³¼ ê´€ë¦¬</h1>
        </div>
        
        <div class="content">
            <div class="preset-buttons">
                <button class="preset-btn" onclick="loadPreset('weekday')">í‰ì¼</button>
                <button class="preset-btn" onclick="loadPreset('weekend')">ì£¼ë§</button>
                <button class="preset-btn" onclick="loadPreset('training')">í›ˆë ¨</button>
                <button class="preset-btn" onclick="clearRoutine()">ì´ˆê¸°í™”</button>
            </div>
            
            <div class="routine-container">
                <div class="time-slots">
                    <h3>ì˜¤ëŠ˜ì˜ ì¼ê³¼</h3>
                    <div id="timeSlots"></div>
                </div>
                
                <div class="templates">
                    <h3>í™œë™ í…œí”Œë¦¿ (í´ë¦­í•˜ì—¬ ì¶”ê°€)</h3>
                    <div class="template-grid">
                        <div class="template-item" onclick="addActivity('ê¸°ìƒ/ì„¸ë©´', 'ğŸŒ…')">
                            <div class="template-icon">ğŸŒ…</div>
                            <div>ê¸°ìƒ/ì„¸ë©´</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì•„ì¹¨ì‹ì‚¬', 'ğŸ³')">
                            <div class="template-icon">ğŸ³</div>
                            <div>ì•„ì¹¨ì‹ì‚¬</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì ì‹¬ì‹ì‚¬', 'ğŸ±')">
                            <div class="template-icon">ğŸ±</div>
                            <div>ì ì‹¬ì‹ì‚¬</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì €ë…ì‹ì‚¬', 'ğŸ½ï¸')">
                            <div class="template-icon">ğŸ½ï¸</div>
                            <div>ì €ë…ì‹ì‚¬</div>
                        </div>
                        <div class="template-item" onclick="addActivity('êµìœ¡/í›ˆë ¨', 'ğŸ“š')">
                            <div class="template-icon">ğŸ“š</div>
                            <div>êµìœ¡/í›ˆë ¨</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì‘ì—…/ê·¼ë¬´', 'ğŸ’¼')">
                            <div class="template-icon">ğŸ’¼</div>
                            <div>ì‘ì—…/ê·¼ë¬´</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì²´ë ¥ë‹¨ë ¨', 'ğŸ’ª')">
                            <div class="template-icon">ğŸ’ª</div>
                            <div>ì²´ë ¥ë‹¨ë ¨</div>
                        </div>
                        <div class="template-item" onclick="addActivity('íœ´ì‹ì‹œê°„', 'â˜•')">
                            <div class="template-icon">â˜•</div>
                            <div>íœ´ì‹ì‹œê°„</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ê°œì¸ì •ë¹„', 'ğŸ§¹')">
                            <div class="template-icon">ğŸ§¹</div>
                            <div>ê°œì¸ì •ë¹„</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ììœ ì‹œê°„', 'ğŸ®')">
                            <div class="template-icon">ğŸ®</div>
                            <div>ììœ ì‹œê°„</div>
                        </div>
                        <div class="template-item" onclick="addActivity('ì·¨ì¹¨ì¤€ë¹„', 'ğŸŒ™')">
                            <div class="template-icon">ğŸŒ™</div>
                            <div>ì·¨ì¹¨ì¤€ë¹„</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let routine = JSON.parse(localStorage.getItem('routine')) || {};
        let selectedTime = null;
        
        function generateTimeSlots() {
            const container = document.getElementById('timeSlots');
            container.innerHTML = '';
            
            for (let hour = 5; hour < 24; hour++) {
                for (let minute = 0; minute < 60; minute += 30) {
                    const timeKey = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                    const timeBlock = document.createElement('div');
                    timeBlock.className = 'time-block';
                    
                    const timeLabel = document.createElement('div');
                    timeLabel.className = 'time-label';
                    timeLabel.textContent = timeKey;
                    
                    const activitySlot = document.createElement('div');
                    activitySlot.className = 'activity-slot';
                    activitySlot.dataset.time = timeKey;
                    
                    // í˜„ì¬ ì‹œê°„ í‘œì‹œ
                    const now = new Date();
                    const currentTime = `${now.getHours().toString().padStart(2, '0')}:${(Math.floor(now.getMinutes() / 30) * 30).toString().padStart(2, '0')}`;
                    if (timeKey === currentTime) {
                        activitySlot.classList.add('current');
                    }
                    
                    // ì €ì¥ëœ í™œë™ í‘œì‹œ
                    if (routine[timeKey]) {
                        activitySlot.classList.add('active');
                        activitySlot.innerHTML = `
                            <span>${routine[timeKey].icon} ${routine[timeKey].name}</span>
                            <button onclick="removeActivity('${timeKey}', event)" style="padding: 5px 10px;">Ã—</button>
                        `;
                    } else {
                        activitySlot.textContent = 'í´ë¦­í•˜ì—¬ ì¶”ê°€';
                        activitySlot.onclick = () => selectTime(timeKey);
                    }
                    
                    timeBlock.appendChild(timeLabel);
                    timeBlock.appendChild(activitySlot);
                    container.appendChild(timeBlock);
                }
            }
        }
        
        function selectTime(time) {
            selectedTime = time;
            alert(`${time}ì— ì¶”ê°€í•  í™œë™ì„ ì„ íƒí•˜ì„¸ìš”.`);
        }
        
        function addActivity(name, icon) {
            if (!selectedTime) {
                alert('ë¨¼ì € ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”.');
                return;
            }
            
            routine[selectedTime] = { name, icon };
            saveRoutine();
            generateTimeSlots();
            selectedTime = null;
        }
        
        function removeActivity(time, event) {
            event.stopPropagation();
            delete routine[time];
            saveRoutine();
            generateTimeSlots();
        }
        
        function saveRoutine() {
            localStorage.setItem('routine', JSON.stringify(routine));
        }
        
        function loadPreset(type) {
            const presets = {
                weekday: {
                    '06:00': { name: 'ê¸°ìƒ/ì„¸ë©´', icon: 'ğŸŒ…' },
                    '06:30': { name: 'ì•„ì¹¨ì‹ì‚¬', icon: 'ğŸ³' },
                    '08:00': { name: 'ì‘ì—…/ê·¼ë¬´', icon: 'ğŸ’¼' },
                    '12:00': { name: 'ì ì‹¬ì‹ì‚¬', icon: 'ğŸ±' },
                    '13:00': { name: 'ì‘ì—…/ê·¼ë¬´', icon: 'ğŸ’¼' },
                    '17:00': { name: 'ì²´ë ¥ë‹¨ë ¨', icon: 'ğŸ’ª' },
                    '18:00': { name: 'ì €ë…ì‹ì‚¬', icon: 'ğŸ½ï¸' },
                    '19:00': { name: 'ê°œì¸ì •ë¹„', icon: 'ğŸ§¹' },
                    '20:00': { name: 'ììœ ì‹œê°„', icon: 'ğŸ®' },
                    '22:00': { name: 'ì·¨ì¹¨ì¤€ë¹„', icon: 'ğŸŒ™' }
                },
                weekend: {
                    '07:00': { name: 'ê¸°ìƒ/ì„¸ë©´', icon: 'ğŸŒ…' },
                    '08:00': { name: 'ì•„ì¹¨ì‹ì‚¬', icon: 'ğŸ³' },
                    '09:00': { name: 'ììœ ì‹œê°„', icon: 'ğŸ®' },
                    '12:00': { name: 'ì ì‹¬ì‹ì‚¬', icon: 'ğŸ±' },
                    '13:00': { name: 'íœ´ì‹ì‹œê°„', icon: 'â˜•' },
                    '18:00': { name: 'ì €ë…ì‹ì‚¬', icon: 'ğŸ½ï¸' },
                    '19:00': { name: 'ììœ ì‹œê°„', icon: 'ğŸ®' },
                    '22:00': { name: 'ì·¨ì¹¨ì¤€ë¹„', icon: 'ğŸŒ™' }
                },
                training: {
                    '05:30': { name: 'ê¸°ìƒ/ì„¸ë©´', icon: 'ğŸŒ…' },
                    '06:00': { name: 'ì•„ì¹¨ì‹ì‚¬', icon: 'ğŸ³' },
                    '07:00': { name: 'êµìœ¡/í›ˆë ¨', icon: 'ğŸ“š' },
                    '12:00': { name: 'ì ì‹¬ì‹ì‚¬', icon: 'ğŸ±' },
                    '13:00': { name: 'êµìœ¡/í›ˆë ¨', icon: 'ğŸ“š' },
                    '18:00': { name: 'ì €ë…ì‹ì‚¬', icon: 'ğŸ½ï¸' },
                    '19:00': { name: 'ê°œì¸ì •ë¹„', icon: 'ğŸ§¹' },
                    '21:00': { name: 'ì·¨ì¹¨ì¤€ë¹„', icon: 'ğŸŒ™' }
                }
            };
            
            routine = presets[type] || {};
            saveRoutine();
            generateTimeSlots();
        }
        
        function clearRoutine() {
            if (confirm('ëª¨ë“  ì¼ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                routine = {};
                saveRoutine();
                generateTimeSlots();
            }
        }
        
        generateTimeSlots();
        setInterval(() => generateTimeSlots(), 30000); // 30ì´ˆë§ˆë‹¤ í˜„ì¬ ì‹œê°„ ì—…ë°ì´íŠ¸
    </script>
</body>
</html>