<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°„ë‹¨ ë©”ëª¨</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .note-input { display: flex; gap: 10px; margin-bottom: 20px; }
        .note-textarea { flex: 1; min-height: 100px; resize: vertical; }
        .note-item { background: var(--bg-dark); padding: 20px; border-radius: 10px; 
                    margin-bottom: 15px; position: relative; border-left: 4px solid var(--primary); }
        .note-date { font-size: 0.85em; color: var(--text-secondary); margin-bottom: 10px; }
        .note-content { white-space: pre-wrap; word-break: break-word; }
        .note-actions { position: absolute; top: 10px; right: 10px; }
        .category-tag { background: var(--bg-hover); padding: 4px 12px; border-radius: 15px; 
                       font-size: 0.85em; margin-right: 10px; }
        .search-box { margin-bottom: 20px; }
        .empty-state { text-align: center; padding: 40px; color: var(--text-secondary); }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <a href="index.html" class="back-btn">â† ë’¤ë¡œ</a>
            <h1>ê°„ë‹¨ ë©”ëª¨</h1>
        </div>
        
        <div class="content">
            <div class="note-input">
                <textarea id="noteInput" class="note-textarea" 
                          placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (Ctrl+Enterë¡œ ì €ì¥)"></textarea>
                <select id="categorySelect">
                    <option value="ì¼ë°˜">ì¼ë°˜</option>
                    <option value="ì¤‘ìš”">ì¤‘ìš”</option>
                    <option value="ì•„ì´ë””ì–´">ì•„ì´ë””ì–´</option>
                    <option value="ì¼ê¸°">ì¼ê¸°</option>
                </select>
                <button onclick="addNote()">ì €ì¥</button>
            </div>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ë©”ëª¨ ê²€ìƒ‰..." oninput="displayNotes()">
            </div>
            
            <div id="notesList"></div>
        </div>
    </div>
    
    <script>
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        
        function addNote() {
            const content = document.getElementById('noteInput').value.trim();
            const category = document.getElementById('categorySelect').value;
            
            if (!content) return;
            
            notes.unshift({
                id: Date.now(),
                content,
                category,
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('notes', JSON.stringify(notes));
            document.getElementById('noteInput').value = '';
            displayNotes();
        }
        
        function deleteNote(id) {
            if (confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                notes = notes.filter(n => n.id !== id);
                localStorage.setItem('notes', JSON.stringify(notes));
                displayNotes();
            }
        }
        
        function displayNotes() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filtered = notes.filter(n => 
                n.content.toLowerCase().includes(search) || 
                n.category.toLowerCase().includes(search)
            );
            
            const list = document.getElementById('notesList');
            
            if (filtered.length === 0) {
                list.innerHTML = '<div class="empty-state">ğŸ“<br>ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }
            
            list.innerHTML = filtered.map(note => `
                <div class="note-item">
                    <div class="note-actions">
                        <button class="delete" onclick="deleteNote(${note.id})">ì‚­ì œ</button>
                    </div>
                    <div class="note-date">
                        <span class="category-tag">${note.category}</span>
                        ${new Date(note.createdAt).toLocaleString('ko-KR')}
                    </div>
                    <div class="note-content">${escapeHtml(note.content)}</div>
                </div>
            `).join('');
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        document.getElementById('noteInput').addEventListener('keydown', e => {
            if (e.ctrlKey && e.key === 'Enter') addNote();
        });
        
        displayNotes();
    </script>
</body>
</html>